import{r as g}from"./index.DhYZZe0J.js";function p(e,s,t){var r;if(typeof e=="string"){let n=document;t?((r=t[e])!==null&&r!==void 0||(t[e]=n.querySelectorAll(e)),e=t[e]):e=n.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}const E={some:0,all:1};function v(e,s,{root:t,margin:r,amount:n="some"}={}){const f=p(e),i=new WeakMap,u=a=>{a.forEach(o=>{const d=i.get(o.target);if(o.isIntersecting!==!!d)if(o.isIntersecting){const l=s(o);typeof l=="function"?i.set(o.target,l):c.unobserve(o.target)}else d&&(d(o),i.delete(o.target))})},c=new IntersectionObserver(u,{root:t,rootMargin:r,threshold:typeof n=="number"?n:E[n]});return f.forEach(a=>c.observe(a)),()=>c.disconnect()}function w(e,{root:s,margin:t,amount:r,once:n=!1}={}){const[f,i]=g.useState(!1);return g.useEffect(()=>{if(!e.current||n&&f)return;const u=()=>(i(!0),n?void 0:()=>i(!1)),c={root:s&&s.current||void 0,margin:t,amount:r};return v(e.current,u,c)},[s,e,t,n,r]),f}export{p as r,w as u};
